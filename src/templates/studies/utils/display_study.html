<div class="col-4 mb-5">
  <small class="text-muted">
    Created by
    {{ study['owner'] }}
    on
    {{ study['created'].strftime('%m-%d-%Y') }}
  </small>
  {% if g.user['id'] in study['participants'] %}
    <a class="text-decoration-none" href="{{ url_for('studies.study', study_title=study['title']) }}">
      <h2 class="mt-2 fw-bold">{{ study['title'] }}</h2>
    </a>
  {% else %}
    <h2 class="mt-2 fw-bold">{{ study['title'] }}</h2>
  {% endif %}
  <p class="lead text-muted mb-1">{{ study['description'] }}</p>
  <div class="mb-2">
    <button type="button" class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#studyInformation{{ study['title']|replace(' ', '') }}">
      Study Information
    </button>

    <div class="modal fade" id="studyInformation{{ study['title']|replace(' ', '') }}" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="studyInformationLabel">Study Title:
              {{ study['title'] }}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <p class="text-start">
              Study Description:
              {{ study['description'] }}
              <br><br>Study Information:
              <br>{{ study['study_information'] }}
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% if g.user['id'] == study['owner'] %}
    <form action="{{ url_for('studies.delete_study', study_title=study['title']) }}" method="post">
      <button class="btn btn-danger btn-sm" type="button submit" onclick="return confirm('Are you sure you want to delete this study?');">Delete Study</button>
    </form>
  {% elif(study['participants'] | length) == 2 and g.user["id"] not in study['participants']%}
    This study is full.
  {% elif g.user['id'] not in study['participants'] and g.user['id'] not in study['requested_participants'] %}
    <a href="{{ url_for('studies.request_join_study', study_title=study['title']) }}" class="btn btn-primary">Request to Join Study</a>
  {% elif study['requested_participants'] and g.user['id'] in study['requested_participants'] %}
    <button type="button" class="btn btn-secondary" disabled="true">Pending Approval from Study Owner</button>
  {% endif %}
</div>